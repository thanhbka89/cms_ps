webpackJsonp([5],{1419:function(t,e,a){a(1474);var n=a(1)(a(1439),a(1492),"data-v-564146e5",null);t.exports=n.exports},1439:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(29),s=a.n(n),o=a(10),r=a.n(o),i=a(9),c=a.n(i),l=a(5),d=a(1482),u=a.n(d),p=a(20),v=a.n(p);e.default={name:"Inventory",data:function(){return{showModal:!1,item:{id:"",code:"",name:"",category:1,status:1},options:[]}},created:function(){var t=this;return c()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getActiveCodes();case 2:case"end":return e.stop()}},e,t)}))()},methods:{openModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.item;this.item=t,this.showModal=!0},closeModal:function(){this.showModal=!1},modify:function(){this.item.id?this.update():this.insert()},insert:function(){var t=this,e=this.item.code;this.item.code=e.code,l.a.request("post","/inventory",this.item).then(function(e){e.data.success?(t.closeModal(),t.showToast()):t.showToast("warning",e.data.message.code)}).catch(function(t){console.error(t)})},update:function(){var t=this;if("object"===s()(this.item.code)&&null!==this.item.code){var e=this.item.code;this.item.code=e.code}l.a.request("put","/inventory/"+this.item.id,this.item).then(function(e){e.data&&(t.closeModal(),t.showToast())}).catch(function(t){console.error(t)})},getActiveCodes:function(){var t=this;return c()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.request("get","/code/p/1?limit=100&status=1");case 3:a=e.sent,a.data.success&&(t.options=a.data.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,t,[[0,7]])}))()},showToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.$swal({type:t,title:e||(this.item.id?"Cập nhật":"Thêm mới")+" thành công",toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3})}},components:{Index:u.a,ServiceCreate:v.a}}},1447:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(10),s=a.n(n),o=a(8),r=a.n(o),i=a(9),c=a.n(i),l=a(5),d=a(193),u=a.n(d),p=a(28),v=a(30),m=a.n(v);e.default={name:"InventoryIndex",components:{DatePicker:u.a,Multiselect:m.a},data:function(){return{searchKey:"",page:1,limit:15,totalPage:10,items:[],dateFrom:"",dateTo:(new Date).setDate((new Date).getDate()+1),codeSelected:null}},props:{openModal:Function,codes:Array},computed:{filteredResources:function(){return this.items}},created:function(){var t=this;return c()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.all([t.fetchItems(),t.paginateCallback()]);case 2:case"end":return e.stop()}},e,t)}))()},methods:{paginateCallback:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return c()(s.a.mark(function a(){var n,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.build_query(),a.prev=1,a.next=4,l.a.request("get","/inventory/p/"+e+n);case 4:o=a.sent,t.items=o.data.data,a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.error(a.t0);case 11:case"end":return a.stop()}},a,t,[[1,8]])}))()},fetchItems:function(){var t=this;return c()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.count();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}},e,t,[[0,5]])}))()},addItem:function(){this.openModal({category:1,status:1})},editItem:function(t){this.openModal(t)},deleteItem:function(t){var e=this;return c()(s.a.mark(function a(){var n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l.a.request("delete","/inventory/"+t);case 3:n=a.sent,n.data.success&&e.showToast(1),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.error(a.t0);case 10:case"end":return a.stop()}},a,e,[[0,7]])}))()},count:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return c()(s.a.mark(function a(){var n,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=e||"",a.prev=1,a.next=4,l.a.request("get","/inventory/get/count"+e);case 4:n=a.sent,n.data.success&&(o=n.data.data,t.totalPage=o>t.limit?Math.ceil(o/t.limit):1),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.error(a.t0);case 11:case"end":return a.stop()}},a,t,[[1,8]])}))()},build_query:function(){var t="?";return this.limit&&(t=t.concat("&limit="+this.limit)),this.codeSelected&&(t=t.concat("&code="+this.codeSelected.code)),this.dateFrom&&(t=t.concat("&from="+a.i(p.a)({date:this.dateFrom}))),this.dateTo&&(t=t.concat("&to="+a.i(p.a)({date:this.dateTo}))),t},search:function(){var t=this;return c()(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.build_query(),e.prev=1,e.next=4,t.count(a);case 4:return e.next=6,t.paginateCallback();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}},e,t,[[1,8]])}))()},nameWithLang:function(t){return"["+t.code+"] - "+t.name},searchByCode:function(t){this.codeSelected=t,this.search()},showAlert:function(){this.$swal("Chức năng đang hoàn thiện")},showToast:function(t){this.$swal({type:"success",title:(t?"Cập nhật":"Thêm mới")+" thành công",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})}}}},1461:function(t,e,a){e=t.exports=a(1415)(),e.push([t.i,".z-label[data-v-564146e5]{margin-top:5px}","",{version:3,sources:["C:/working/code/cms_ps/src/components/views/Inventory.vue"],names:[],mappings:"AACA,0BACE,cAAgB,CACjB",file:"Inventory.vue",sourcesContent:["\n.z-label[data-v-564146e5] {\r\n  margin-top: 5px;\n}\r\n"],sourceRoot:""}])},1466:function(t,e,a){e=t.exports=a(1415)(),e.push([t.i,".z-header[data-v-8d098a2e]{color:#566787}.table-wrapper[data-v-8d098a2e]{padding:20px 25px;margin:30px 0;border-radius:3px;box-shadow:0 1px 1px rgba(0,0,0,.05)}.table-title[data-v-8d098a2e]{padding-bottom:15px;background:#435d7d;color:#fff;padding:16px 30px;margin:-20px -25px 10px;border-radius:3px 3px 0 0}.table-title .btn[data-v-8d098a2e]{color:#fff;float:right;font-size:13px;min-width:50px;border-radius:2px;border:none;outline:none!important;margin-left:10px;margin-top:15px}","",{version:3,sources:["C:/working/code/cms_ps/src/components/widgets/inventory/Index.vue"],names:[],mappings:"AACA,2BACI,aAAc,CACjB,AACD,gCACI,kBAAmB,AACnB,cAAe,AACf,kBAAmB,AACnB,oCAAsC,CACzC,AACD,8BACI,oBAAqB,AACrB,mBAAoB,AACpB,WAAY,AACZ,kBAAmB,AACnB,wBAAyB,AACzB,yBAA2B,CAC9B,AACD,mCACI,WAAY,AACZ,YAAa,AACb,eAAgB,AAChB,eAAgB,AAChB,kBAAmB,AACnB,YAAa,AACb,uBAAyB,AACzB,iBAAkB,AAClB,eAAiB,CACpB",file:"Index.vue",sourcesContent:["\n.z-header[data-v-8d098a2e] {\r\n    color: #566787\n}\n.table-wrapper[data-v-8d098a2e] {\r\n    padding: 20px 25px;\r\n    margin: 30px 0;\r\n    border-radius: 3px;\r\n    box-shadow: 0 1px 1px rgba(0,0,0,.05);\n}\n.table-title[data-v-8d098a2e] {\r\n    padding-bottom: 15px;\r\n    background: #435d7d;\r\n    color: #fff;\r\n    padding: 16px 30px;\r\n    margin: -20px -25px 10px;\r\n    border-radius: 3px 3px 0 0;\n}\n.table-title .btn[data-v-8d098a2e] {\r\n    color: #fff;\r\n    float: right;\r\n    font-size: 13px;\r\n    min-width: 50px;\r\n    border-radius: 2px;\r\n    border: none;\r\n    outline: none !important;\r\n    margin-left: 10px;\r\n    margin-top: 15px;\n}\r\n"],sourceRoot:""}])},1474:function(t,e,a){var n=a(1461);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(1416)("3fc86ef9",n,!0)},1479:function(t,e,a){var n=a(1466);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(1416)("6acfc58d",n,!0)},1482:function(t,e,a){a(1479);var n=a(1)(a(1447),a(1498),"data-v-8d098a2e",null);t.exports=n.exports},1492:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"content"},[a("div",{staticClass:"row"},[t.showModal?a("service-create",[a("h3",{staticClass:"modal-title",attrs:{slot:"header"},slot:"header"},[t._v("\n          "+t._s(t.item.id?"Cập nhật":"Thêm mới")+"\n        ")]),t._v(" "),a("div",{staticClass:"form-horizontal box-body",attrs:{slot:"body"},slot:"body"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-3 z-label"},[t._v("Mã dịch vụ:")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("v-select",{attrs:{label:"name",options:t.options},model:{value:t.item.code,callback:function(e){t.$set(t.item,"code",e)},expression:"item.code"}})],1)]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-3 z-label"},[t._v("Tên giao dịch:")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.name,expression:"item.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Tên giao dịch ..."},domProps:{value:t.item.name},on:{input:function(e){e.target.composing||t.$set(t.item,"name",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-3 z-label"},[t._v("Giá nhập:")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.gia_nhap,expression:"item.gia_nhap"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.item.gia_nhap},on:{input:function(e){e.target.composing||t.$set(t.item,"gia_nhap",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-3 z-label"},[t._v("Số lượng:")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.quantity,expression:"item.quantity"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.item.quantity},on:{input:function(e){e.target.composing||t.$set(t.item,"quantity",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-3 z-label"},[t._v("Danh mục:")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.item.category,expression:"item.category"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.item,"category",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1"}},[t._v("Nước uống")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("Đồ ăn")]),t._v(" "),a("option",{attrs:{value:"3"}},[t._v("PS")]),t._v(" "),a("option",{attrs:{value:"4"}},[t._v("Khác")])])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-3 z-label"},[t._v("Trạng thái:")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.item.status,expression:"item.status"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.item,"status",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1"}},[t._v("Áp dụng")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("Không áp dụng")])])])])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"btn btn-outline-info",attrs:{type:"button"},on:{click:function(e){t.closeModal()}}},[t._v(" Close ")]),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){t.modify()}}},[t._v("Save Changes")])])]):t._e(),t._v(" "),a("div",{staticClass:"col-xs-12"},[a("index",{attrs:{openModal:t.openModal,codes:t.options}})],1)],1)])},staticRenderFns:[]}},1498:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"table-title"},[a("div",{staticClass:"row"},[t._m(0),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("a",{staticClass:"btn btn-success",attrs:{href:"#","data-toggle":"modal"},on:{click:t.addItem}},[a("span",[t._v("Nhập kho")])])])])]),t._v(" "),a("div",{staticClass:"filters row"},[a("div",{staticClass:"form-group col-sm-5"},[a("multiselect",{attrs:{options:t.codes,"custom-label":t.nameWithLang,placeholder:"Tìm theo mastercode ...",label:"code","track-by":"id"},on:{select:t.searchByCode},model:{value:t.codeSelected,callback:function(e){t.codeSelected=e},expression:"codeSelected"}})],1),t._v(" "),a("div",{staticClass:"form-group col-sm-6"},[a("date-picker",{attrs:{format:"YYYY-MM-DD",lang:"en",confirm:"",placeholder:"Từ ngày"},on:{change:t.search},model:{value:t.dateFrom,callback:function(e){t.dateFrom=e},expression:"dateFrom"}}),t._v(" "),a("date-picker",{attrs:{format:"YYYY-MM-DD",lang:"en",confirm:"",placeholder:"Đến ngày"},on:{change:t.search},model:{value:t.dateTo,callback:function(e){t.dateTo=e},expression:"dateTo"}})],1)]),t._v(" "),a("table",{staticClass:"table table-striped table-hover"},[t._m(1),t._v(" "),a("tbody",t._l(t.filteredResources,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"col-md-1"},[t._v(t._s(e.id))]),t._v(" "),a("td",{staticClass:"col-md-3"},[t._v(t._s(t._f("fDateTime")(e.created_at)))]),t._v(" "),a("td",{staticClass:"col-md-1"},[t._v(t._s(e.code))]),t._v(" "),a("td",{staticClass:"col-md-2"},[t._v(t._s(t._f("toVnd")(e.gia_nhap)))]),t._v(" "),a("td",{staticClass:"col-md-2"},[t._v(t._s(e.quantity))]),t._v(" "),a("td",{staticClass:"col-md-3"},[a("button",{staticClass:"btn btn-primary",on:{click:function(a){t.editItem(e)}}},[t._v("Edit")]),t._v(" "),a("button",{staticClass:"btn btn-danger",on:{click:function(a){t.deleteItem(e.id)}}},[t._v("Delete")]),t._v(" "),a("a",{staticClass:"icon",attrs:{href:"#"}},[a("i",{staticClass:"fa fa-pencil",on:{click:function(e){t.showAlert()}}})]),t._v(" "),a("a",{staticClass:"icon",attrs:{href:"#"}},[a("i",{staticClass:"fa fa-trash",on:{click:t.showAlert}})])])])}))]),t._v(" "),a("div",{staticClass:"clearfix"},[a("paginate",{attrs:{"page-count":t.totalPage,"margin-pages":2,"page-range":5,"click-handler":t.paginateCallback,"container-class":"pagination","page-class":"page-item","page-link-class":"page-link-item","prev-class":"prev-item","prev-link-class":"prev-link-item","next-class":"next-item","next-link-class":"next-link-item","break-view-class":"break-view","break-view-link-class":"break-view-link","first-last-button":!0},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-6"},[a("h2",[t._v("Manage "),a("b",[t._v("Inventory")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"z-header"},[a("tr",[a("th",[t._v("ID")]),t._v(" "),a("th",[t._v("Ngày nhập")]),t._v(" "),a("th",[t._v("Code")]),t._v(" "),a("th",[t._v("Giá nhập")]),t._v(" "),a("th",[t._v("Số lượng")]),t._v(" "),a("th",[t._v("Actions")])])])}]}}});
//# sourceMappingURL=5.dd732cb1daf5f52e61ff.js.map