webpackJsonp([4],{1420:function(t,e,a){a(1477);var s=a(1)(a(1440),a(1495),"data-v-7085c9e8",null);t.exports=s.exports},1440:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(10),n=a.n(s),o=a(9),i=a.n(o),r=a(29),c=a.n(r),l=a(5),d=a(1484),u=a.n(d),p=a(20),m=a.n(p);e.default={name:"ListPS",data:function(){return{showModal:!1,item:{id:"",code:"",name:"",category:1,status:1},options:[]}},created:function(){this.getActiveCodes()},methods:{openModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.item;this.item=t,this.showModal=!0},closeModal:function(){this.showModal=!1},modify:function(){this.item.id?this.update():this.insert()},insert:function(){var t=this,e=this.item.code;this.item.code=e.code,l.a.request("post","/ps",this.item).then(function(e){e.data.success?(t.closeModal(),t.showToast()):t.showToast("warning",e.data.message.code)}).catch(function(t){console.error(t)})},update:function(){var t=this;if("object"===c()(this.item.code)&&null!==this.item.code){var e=this.item.code;this.item.code=e.code}l.a.request("put","/ps/"+this.item.id,this.item).then(function(e){e.data&&(t.closeModal(),t.showToast())}).catch(function(t){console.error(t)})},getActiveCodes:function(){var t=this;return i()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.request("get","/code/p/1?limit=100&status=1&category=3");case 3:a=e.sent,a.data.success&&(t.options=a.data.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,t,[[0,7]])}))()},showToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.$swal({type:t,title:e||(this.item.id?"Cập nhật":"Thêm mới")+" thành công",toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3})}},components:{Index:u.a,ServiceCreate:m.a}}},1449:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(10),n=a.n(s),o=a(9),i=a.n(o),r=a(5);e.default={name:"PSIndex",data:function(){return{searchKey:"",page:1,limit:10,totalPage:10,items:[]}},props:{openModal:Function},computed:{filteredResources:function(){return this.items}},created:function(){this.fetchItems(),this.paginateCallback()},methods:{paginateCallback:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return i()(n.a.mark(function a(){var s,o;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=t.build_query(),a.prev=1,a.next=4,r.a.request("get","/ps/p/"+e+s);case 4:o=a.sent,t.items=o.data.data,a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),t.items=[],console.error(a.t0);case 12:case"end":return a.stop()}},a,t,[[1,8]])}))()},fetchItems:function(){var t=this;return i()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.count();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}},e,t,[[0,5]])}))()},addItem:function(){this.openModal({status:1})},editItem:function(t){this.openModal(t)},deleteItem:function(t){var e=this;return i()(n.a.mark(function a(){var s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.a.request("delete","/ps/"+t);case 3:s=a.sent,s.data.success&&e.showToast(t),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.error(a.t0);case 10:case"end":return a.stop()}},a,e,[[0,7]])}))()},search:function(){var t=this;r.a.request("get","/item/s/query?q="+this.searchKey).then(function(e){t.items=e.data}).catch(function(t){console.error(t)})},count:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return i()(n.a.mark(function a(){var s,o;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=e||"",a.prev=1,a.next=4,r.a.request("get","/ps/get/count"+e);case 4:s=a.sent,s.data.success&&(o=s.data.data,t.totalPage=o>t.limit?Math.ceil(o/t.limit):1),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.error(a.t0);case 11:case"end":return a.stop()}},a,t,[[1,8]])}))()},build_query:function(){var t="?";return this.searchKey&&(t=t.concat("code="+this.searchKey)),this.limit&&(t=t.concat("&limit="+this.limit)),t},confirmDelete:function(t){var e=this;this.$swal({title:"Bạn có chắc?",text:"Bạn có muốn xóa?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Đồng ý"}).then(function(a){a.value&&t?e.deleteItem(t):e.showToast(t,"error","Thao tác thất bại!")})},showAlert:function(){this.$swal("Chức năng đang hoàn thiện")},showToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=arguments[2];this.$swal({type:e,title:a||(t?"Cập nhật":"Thêm mới")+" thành công",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})}}}},1458:function(t,e,a){e=t.exports=a(1415)(),e.push([t.i,".z-header[data-v-4ec6cfec]{color:#566787}.table-wrapper[data-v-4ec6cfec]{padding:20px 25px;margin:30px 0;border-radius:3px;box-shadow:0 1px 1px rgba(0,0,0,.05)}.table-title[data-v-4ec6cfec]{padding-bottom:15px;background:#435d7d;color:#fff;padding:16px 30px;margin:-20px -25px 10px;border-radius:3px 3px 0 0}.table-title .btn[data-v-4ec6cfec]{color:#fff;float:right;font-size:13px;min-width:50px;border-radius:2px;border:none;outline:none!important;margin-left:10px;margin-top:15px}","",{version:3,sources:["D:/Source/cms_ps/src/components/widgets/ps/Index.vue"],names:[],mappings:"AACA,2BACI,aAAc,CACjB,AACD,gCACI,kBAAmB,AACnB,cAAe,AACf,kBAAmB,AACnB,oCAAsC,CACzC,AACD,8BACI,oBAAqB,AACrB,mBAAoB,AACpB,WAAY,AACZ,kBAAmB,AACnB,wBAAyB,AACzB,yBAA2B,CAC9B,AACD,mCACI,WAAY,AACZ,YAAa,AACb,eAAgB,AAChB,eAAgB,AAChB,kBAAmB,AACnB,YAAa,AACb,uBAAyB,AACzB,iBAAkB,AAClB,eAAiB,CACpB",file:"Index.vue",sourcesContent:["\n.z-header[data-v-4ec6cfec] {\r\n    color: #566787\n}\n.table-wrapper[data-v-4ec6cfec] {\r\n    padding: 20px 25px;\r\n    margin: 30px 0;\r\n    border-radius: 3px;\r\n    box-shadow: 0 1px 1px rgba(0,0,0,.05);\n}\n.table-title[data-v-4ec6cfec] {\r\n    padding-bottom: 15px;\r\n    background: #435d7d;\r\n    color: #fff;\r\n    padding: 16px 30px;\r\n    margin: -20px -25px 10px;\r\n    border-radius: 3px 3px 0 0;\n}\n.table-title .btn[data-v-4ec6cfec] {\r\n    color: #fff;\r\n    float: right;\r\n    font-size: 13px;\r\n    min-width: 50px;\r\n    border-radius: 2px;\r\n    border: none;\r\n    outline: none !important;\r\n    margin-left: 10px;\r\n    margin-top: 15px;\n}\r\n"],sourceRoot:""}])},1464:function(t,e,a){e=t.exports=a(1415)(),e.push([t.i,".z-label[data-v-7085c9e8]{margin-top:5px}","",{version:3,sources:["D:/Source/cms_ps/src/components/views/ListPS.vue"],names:[],mappings:"AACA,0BACE,cAAgB,CACjB",file:"ListPS.vue",sourcesContent:["\n.z-label[data-v-7085c9e8] {\r\n  margin-top: 5px;\n}\r\n"],sourceRoot:""}])},1471:function(t,e,a){var s=a(1458);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(1416)("4317233e",s,!0)},1477:function(t,e,a){var s=a(1464);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(1416)("7b9a81e6",s,!0)},1484:function(t,e,a){a(1471);var s=a(1)(a(1449),a(1489),"data-v-4ec6cfec",null);t.exports=s.exports},1489:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"table-title"},[a("div",{staticClass:"row"},[t._m(0),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("a",{staticClass:"btn btn-success",attrs:{href:"#","data-toggle":"modal"},on:{click:t.addItem}},[a("span",[t._v("Thêm máy")])])])])]),t._v(" "),a("div",{staticClass:"filters row"},[a("div",{staticClass:"form-group col-sm-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKey,expression:"searchKey"}],staticClass:"form-control",attrs:{id:"search-element",type:"text",placeholder:"Tìm kiếm ...","aria-label":"Search",autocomplete:"off"},domProps:{value:t.searchKey},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.search(e)},input:function(e){e.target.composing||(t.searchKey=e.target.value)}}})])]),t._v(" "),a("table",{staticClass:"table table-striped table-hover"},[t._m(1),t._v(" "),a("tbody",t._l(t.filteredResources,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"col-md-1"},[t._v(t._s(e.id))]),t._v(" "),a("td",{staticClass:"col-md-2"},[t._v(t._s(e.code))]),t._v(" "),a("td",{staticClass:"col-md-2"},[t._v(t._s(e.name))]),t._v(" "),a("td",{staticClass:"col-md-2"},[t._v(t._s(e.status?"Đang áp dụng":"Không áp dụng"))]),t._v(" "),a("td",{staticClass:"col-md-5"},[a("button",{staticClass:"btn btn-primary",on:{click:function(a){t.editItem(e)}}},[t._v("Edit")]),t._v(" "),a("button",{staticClass:"btn btn-danger",on:{click:function(a){t.confirmDelete(e.id)}}},[t._v("Delete")]),t._v(" "),a("a",{staticClass:"icon",attrs:{href:"#"}},[a("i",{staticClass:"fa fa-pencil",on:{click:function(e){t.showAlert()}}})]),t._v(" "),a("a",{staticClass:"icon",attrs:{href:"#"}},[a("i",{staticClass:"fa fa-trash",on:{click:t.showAlert}})])])])}))]),t._v(" "),a("div",{staticClass:"clearfix"},[a("paginate",{attrs:{"page-count":t.totalPage,"margin-pages":2,"page-range":5,"click-handler":t.paginateCallback,"container-class":"pagination","page-class":"page-item","page-link-class":"page-link-item","prev-class":"prev-item","prev-link-class":"prev-link-item","next-class":"next-item","next-link-class":"next-link-item","break-view-class":"break-view","break-view-link-class":"break-view-link","first-last-button":!0},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-6"},[a("h2",[t._v("Manage "),a("b",[t._v("PS")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"z-header"},[a("tr",[a("th",[t._v("ID")]),t._v(" "),a("th",[t._v("Code")]),t._v(" "),a("th",[t._v("Name")]),t._v(" "),a("th",[t._v("Trạng thái")]),t._v(" "),a("th",[t._v("Actions")])])])}]}},1495:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"content"},[a("div",{staticClass:"row"},[t.showModal?a("service-create",[a("h3",{staticClass:"modal-title",attrs:{slot:"header"},slot:"header"},[t._v("\n          "+t._s(t.item.id?"Cập nhật":"Thêm mới")+"\n        ")]),t._v(" "),a("div",{staticClass:"form-horizontal box-body",attrs:{slot:"body"},slot:"body"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-3 z-label"},[t._v("Mã code:")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("v-select",{attrs:{label:"name",options:t.options},model:{value:t.item.code,callback:function(e){t.$set(t.item,"code",e)},expression:"item.code"}})],1)]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-3 z-label"},[t._v("Tên máy:")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.name,expression:"item.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Tên giao dịch ..."},domProps:{value:t.item.name},on:{input:function(e){e.target.composing||t.$set(t.item,"name",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-3 z-label"},[t._v("Trạng thái:")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.item.status,expression:"item.status"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.item,"status",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1"}},[t._v("Áp dụng")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("Không áp dụng")])])])])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"btn btn-outline-info",attrs:{type:"button"},on:{click:function(e){t.closeModal()}}},[t._v(" Close ")]),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){t.modify()}}},[t._v("Save Changes")])])]):t._e(),t._v(" "),a("div",{staticClass:"col-xs-12"},[a("index",{attrs:{openModal:t.openModal}})],1)],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=4.fa5548f006509de45b1b.js.map