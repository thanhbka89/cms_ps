{"version":3,"sources":["webpack:///static/js/7.2b3ebe07fc139856029d.js","webpack:///./src/components/views/ReportNXT.vue","webpack:///ReportNXT.vue","webpack:///./src/components/views/ReportNXT.vue?9843","webpack:///./src/components/views/ReportNXT.vue?79ae","webpack:///./src/components/views/ReportNXT.vue?a653"],"names":["webpackJsonp","1422","module","exports","__webpack_require__","Component","1442","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_values__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_values___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_4_vue2_datepicker__","__WEBPACK_IMPORTED_MODULE_4_vue2_datepicker___default","__WEBPACK_IMPORTED_MODULE_5__api__","__WEBPACK_IMPORTED_MODULE_6__helpers__","curDate","Date","name","components","DatePicker","a","data","items","dateFrom","getFullYear","getMonth","dateTo","setDate","getDate","code","dauky_sl","receive_trongky_sl","receive_trongky_thanhtien","issue_trongky_sl","issue_trongky_thanhtien","sl_tinhtoan","nhap_trong_ky","xuat_trong_ky","ton_dau_ky","computed","filteredResources","this","created","_this","mark","_callee","wrap","_context","prev","next","all","getItems","search","stop","methods","_this2","_callee2","response","_context2","request","sent","t0","console","error","_this3","_callee3","item","_context3","showAlert","abrupt","getNhapTrongKy","getXuatTrongKy","getTonkhoDauKy","forEach","element","idx","id","id_item","found","find","el","sl_thucte","quantity","total_money","getTonkhoCuoiKy","push","_this4","_callee4","query","temp","groups","_context4","build_query","reduce","r","o","date","gia_nhap","_this5","_callee5","_context5","code_item","parseInt","price","_this6","_callee6","fromPeriod","toPeriod","lastPeriod","_context6","i","format","concat","updateKiemKe","_this7","_callee7","_context7","period","success","showToast","msg","arguments","length","undefined","$swal","type","message","title","toast","position","showConfirmButton","timer","1462","version","sources","names","mappings","file","sourcesContent","sourceRoot","1475","content","locals","1493","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","attrs","lang","confirm","placeholder","on","change","model","callback","$$v","expression","click","_l","key","_s","_f","staticRenderFns","staticStyle","border","rowspan","colspan"],"mappings":"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","file":"static/js/7.2b3ebe07fc139856029d.js","sourcesContent":["webpackJsonp([7],{\n\n/***/ 1422:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(1475)\n\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(1442),\n  /* template */\n  __webpack_require__(1493),\n  /* scopeId */\n  \"data-v-5bc6c2c2\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 1442:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_values__ = __webpack_require__(194);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_values___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_values__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vue2_datepicker__ = __webpack_require__(193);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vue2_datepicker___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_vue2_datepicker__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__api__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__helpers__ = __webpack_require__(28);\n\n\n\n\n\n\n\n\n\n\nvar curDate = new Date();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'ReportNXT',\n  components: { DatePicker: __WEBPACK_IMPORTED_MODULE_4_vue2_datepicker___default.a },\n  data: function data() {\n    return {\n      items: [],\n      dateFrom: new Date(curDate.getFullYear(), curDate.getMonth(), 1),\n      dateTo: new Date().setDate(curDate.getDate() + 1),\n      data: [{\n        code: '',\n        name: '',\n        dauky_sl: '',\n        receive_trongky_sl: '',\n        receive_trongky_thanhtien: '',\n        issue_trongky_sl: '',\n        issue_trongky_thanhtien: '',\n        sl_tinhtoan: '' }],\n      nhap_trong_ky: [],\n      xuat_trong_ky: [],\n      ton_dau_ky: []\n    };\n  },\n\n  computed: {\n    filteredResources: function filteredResources() {\n      return this.data;\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.mark(function _callee() {\n      return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default.a.all([_this.getItems(), _this.search()]);\n\n            case 2:\n            case 'end':\n              return _context.stop();\n          }\n        }\n      }, _callee, _this);\n    }))();\n  },\n\n  methods: {\n    getItems: function getItems() {\n      var _this2 = this;\n\n      return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.mark(function _callee2() {\n        var response;\n        return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return __WEBPACK_IMPORTED_MODULE_5__api__[\"a\" /* default */].request('get', '/item/cate_active/1,2,4');\n\n              case 3:\n                response = _context2.sent;\n\n                _this2.items = response.data;\n                _context2.next = 10;\n                break;\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2['catch'](0);\n\n                console.error(_context2.t0);\n\n              case 10:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, _this2, [[0, 7]]);\n      }))();\n    },\n    search: function search() {\n      var _this3 = this;\n\n      return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.mark(function _callee3() {\n        var item;\n        return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!(!_this3.dateFrom || !_this3.dateTo)) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                _this3.showAlert('Vui lòng chọn ngày tháng!');\n                return _context3.abrupt('return');\n\n              case 3:\n                _context3.next = 5;\n                return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default.a.all([_this3.getNhapTrongKy(), _this3.getXuatTrongKy(), _this3.getTonkhoDauKy()]);\n\n              case 5:\n\n                _this3.data = [];\n                item = {};\n\n                _this3.items.forEach(function (element, idx) {\n                  item = {};\n                  item.id = idx + 1;\n                  item.id_item = element.id;\n                  item.code = element.code;\n                  item.name = element.name;\n\n                  var found = _this3.ton_dau_ky.find(function (el) {\n                    return element.code === el.code && element.id === el.id_item;\n                  });\n                  if (found) {\n                    item.dauky_sl = found.sl_thucte;\n                  }\n\n                  found = _this3.nhap_trong_ky.find(function (el) {\n                    return element.code === el.code;\n                  });\n                  if (found) {\n                    item.receive_trongky_sl = found.quantity;\n                    item.receive_trongky_thanhtien = found.total_money;\n                  }\n\n                  found = _this3.xuat_trong_ky.find(function (el) {\n                    return element.code === el.code;\n                  });\n                  if (found) {\n                    item.issue_trongky_sl = found.quantity;\n                    item.issue_trongky_thanhtien = found.total_money;\n                  }\n\n                  item.sl_tinhtoan = _this3.getTonkhoCuoiKy(item);\n\n                  _this3.data.push(item);\n                });\n\n              case 8:\n              case 'end':\n                return _context3.stop();\n            }\n          }\n        }, _callee3, _this3);\n      }))();\n    },\n    getNhapTrongKy: function getNhapTrongKy() {\n      var _this4 = this;\n\n      return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.mark(function _callee4() {\n        var query, response, temp, groups;\n        return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this4.nhap_trong_ky = [];\n                query = _this4.build_query();\n                _context4.prev = 2;\n                _context4.next = 5;\n                return __WEBPACK_IMPORTED_MODULE_5__api__[\"a\" /* default */].request('get', '/inventory/p/1?limit=1993&status=1' + query);\n\n              case 5:\n                response = _context4.sent;\n                temp = response.data.data;\n                groups = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_values___default()(temp.reduce(function (r, o) {\n                  var date = o.code;\n                  r[date] = r[date] || { code: o.code, total_money: 0, quantity: 0 };\n                  r[date].total_money += o.gia_nhap;\n                  r[date].quantity += o.quantity;\n                  return r;\n                }, {}));\n\n                _this4.nhap_trong_ky = groups;\n                _context4.next = 14;\n                break;\n\n              case 11:\n                _context4.prev = 11;\n                _context4.t0 = _context4['catch'](2);\n\n                console.error(_context4.t0);\n\n              case 14:\n              case 'end':\n                return _context4.stop();\n            }\n          }\n        }, _callee4, _this4, [[2, 11]]);\n      }))();\n    },\n    getXuatTrongKy: function getXuatTrongKy() {\n      var _this5 = this;\n\n      return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.mark(function _callee5() {\n        var query, response, temp, groups;\n        return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _this5.xuat_trong_ky = [];\n                query = _this5.build_query();\n                _context5.prev = 2;\n                _context5.next = 5;\n                return __WEBPACK_IMPORTED_MODULE_5__api__[\"a\" /* default */].request('get', '/trans/trans_detail/p/1?limit=21993' + query);\n\n              case 5:\n                response = _context5.sent;\n                temp = response.data.data;\n                groups = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_values___default()(temp.reduce(function (r, o) {\n                  var date = o.code_item;\n                  r[date] = r[date] || { code: o.code_item, total_money: 0, quantity: 0 };\n                  r[date].total_money += (parseInt(o.quantity) || 0) * (parseInt(o.price) || 0);\n                  r[date].quantity += parseInt(o.quantity) || 0;\n                  return r;\n                }, {}));\n\n                _this5.xuat_trong_ky = groups;\n                _context5.next = 14;\n                break;\n\n              case 11:\n                _context5.prev = 11;\n                _context5.t0 = _context5['catch'](2);\n\n                console.error(_context5.t0);\n\n              case 14:\n              case 'end':\n                return _context5.stop();\n            }\n          }\n        }, _callee5, _this5, [[2, 11]]);\n      }))();\n    },\n    getTonkhoDauKy: function getTonkhoDauKy() {\n      var _this6 = this;\n\n      return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.mark(function _callee6() {\n        var fromPeriod, toPeriod, lastPeriod, response;\n        return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _this6.ton_dau_ky = [];\n                fromPeriod = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__helpers__[\"a\" /* formatDate */])({ date: _this6.dateFrom, format: 'MM/YYYY' });\n                toPeriod = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__helpers__[\"a\" /* formatDate */])({ date: _this6.dateTo, format: 'MM/YYYY' });\n\n                if (!(fromPeriod === toPeriod)) {\n                  _context6.next = 15;\n                  break;\n                }\n\n                _context6.prev = 4;\n                lastPeriod = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__helpers__[\"d\" /* getPreviousMonth */])({ date: _this6.dateFrom, format: 'MM/YYYY' });\n                _context6.next = 8;\n                return __WEBPACK_IMPORTED_MODULE_5__api__[\"a\" /* default */].request('get', '/kiemke/p/1?limit=1993&period=' + lastPeriod);\n\n              case 8:\n                response = _context6.sent;\n\n                _this6.ton_dau_ky = response.data.data;\n                _context6.next = 15;\n                break;\n\n              case 12:\n                _context6.prev = 12;\n                _context6.t0 = _context6['catch'](4);\n\n                console.error(_context6.t0);\n\n              case 15:\n              case 'end':\n                return _context6.stop();\n            }\n          }\n        }, _callee6, _this6, [[4, 12]]);\n      }))();\n    },\n    getTonkhoCuoiKy: function getTonkhoCuoiKy(item) {\n      return (parseInt(item.dauky_sl) || 0) + (parseInt(item.receive_trongky_sl) || 0) - (parseInt(item.issue_trongky_sl) || 0);\n    },\n    build_query: function build_query() {\n      var query = '';\n      if (this.dateFrom) {\n        query = query.concat('&from=' + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__helpers__[\"a\" /* formatDate */])({ date: this.dateFrom }));\n      }\n      if (this.dateTo) {\n        query = query.concat('&to=' + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__helpers__[\"a\" /* formatDate */])({ date: this.dateTo }));\n      }\n\n      return query;\n    },\n    updateKiemKe: function updateKiemKe() {\n      var _this7 = this;\n\n      return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.mark(function _callee7() {\n        var fromPeriod, toPeriod, data, response;\n        return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                fromPeriod = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__helpers__[\"a\" /* formatDate */])({ date: _this7.dateFrom, format: 'MM/YYYY' });\n                toPeriod = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__helpers__[\"a\" /* formatDate */])({ date: _this7.dateTo, format: 'MM/YYYY' });\n\n                if (!(fromPeriod === toPeriod)) {\n                  _context7.next = 14;\n                  break;\n                }\n\n                _context7.prev = 3;\n                data = {\n                  items: _this7.data,\n                  period: fromPeriod\n                };\n                _context7.next = 7;\n                return __WEBPACK_IMPORTED_MODULE_5__api__[\"a\" /* default */].request('post', '/kiemke/post/mass_save', data);\n\n              case 7:\n                response = _context7.sent;\n\n                if (response.data.success) {\n                  _this7.showToast();\n                } else {\n                  _this7.showToast('error', response.data.data.code);\n                }\n                _context7.next = 14;\n                break;\n\n              case 11:\n                _context7.prev = 11;\n                _context7.t0 = _context7['catch'](3);\n\n                console.error(_context7.t0);\n\n              case 14:\n              case 'end':\n                return _context7.stop();\n            }\n          }\n        }, _callee7, _this7, [[3, 11]]);\n      }))();\n    },\n    showAlert: function showAlert() {\n      var msg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      this.$swal(msg || 'Cảnh báo!');\n    },\n    showToast: function showToast() {\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'success';\n      var message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n      this.$swal({\n        type: type,\n        title: message || 'C\\u1EADp nh\\u1EADt th\\xE0nh c\\xF4ng',\n        toast: true,\n        position: 'top-end',\n        showConfirmButton: false,\n        timer: 5000\n      });\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 1462:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(1415)();\n// imports\n\n\n// module\nexports.push([module.i, \"td[data-v-5bc6c2c2],thead th[data-v-5bc6c2c2]{text-align:center;vertical-align:middle!important}.z-label[data-v-5bc6c2c2]{margin-top:5px}.item-code[data-v-5bc6c2c2]{text-align:left}.table-bordered>thead>tr>th[data-v-5bc6c2c2]{border:1px solid #f39c12}\", \"\", {\"version\":3,\"sources\":[\"D:/Source/cms_ps/src/components/views/ReportNXT.vue\"],\"names\":[],\"mappings\":\"AACA,8CACG,kBAAmB,AACnB,+BAAiC,CACnC,AACD,0BACE,cAAgB,CACjB,AACD,4BACE,eAAiB,CAClB,AACD,6CACE,wBAA0B,CAC3B\",\"file\":\"ReportNXT.vue\",\"sourcesContent\":[\"\\nthead th[data-v-5bc6c2c2],td[data-v-5bc6c2c2] {\\r\\n   text-align: center;\\r\\n   vertical-align: middle!important;\\n}\\n.z-label[data-v-5bc6c2c2] {\\r\\n  margin-top: 5px;\\n}\\n.item-code[data-v-5bc6c2c2] {\\r\\n  text-align: left;\\n}\\n.table-bordered>thead>tr>th[data-v-5bc6c2c2] {\\r\\n  border: 1px solid #f39c12;\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 1475:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(1462);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(1416)(\"273c93b1\", content, true);\n\n/***/ }),\n\n/***/ 1493:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('section', {\n    staticClass: \"content\"\n  }, [_c('div', {\n    staticClass: \"row\"\n  }, [_c('div', {\n    staticClass: \"col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"table-wrapper\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"filters row\"\n  }, [_c('div', {\n    staticClass: \"form-group col-sm-6\"\n  }, [_c('date-picker', {\n    attrs: {\n      \"format\": \"YYYY-MM-DD\",\n      \"lang\": \"en\",\n      \"confirm\": \"\",\n      \"placeholder\": \"Từ ngày\"\n    },\n    on: {\n      \"change\": _vm.search\n    },\n    model: {\n      value: (_vm.dateFrom),\n      callback: function($$v) {\n        _vm.dateFrom = $$v\n      },\n      expression: \"dateFrom\"\n    }\n  }), _vm._v(\" \"), _c('date-picker', {\n    attrs: {\n      \"format\": \"YYYY-MM-DD\",\n      \"lang\": \"en\",\n      \"confirm\": \"\",\n      \"placeholder\": \"Đến ngày\"\n    },\n    on: {\n      \"change\": _vm.search\n    },\n    model: {\n      value: (_vm.dateTo),\n      callback: function($$v) {\n        _vm.dateTo = $$v\n      },\n      expression: \"dateTo\"\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"form-group col-sm-2\"\n  }, [_c('button', {\n    staticClass: \"btn btn-primary\",\n    attrs: {\n      \"type\": \"button\"\n    },\n    on: {\n      \"click\": _vm.updateKiemKe\n    }\n  }, [_vm._v(\"Cập nhật Kiểm kê\")])])]), _vm._v(\" \"), _c('table', {\n    staticClass: \"table table-bordered table-condensed\"\n  }, [_vm._m(1), _vm._v(\" \"), _c('tbody', _vm._l((_vm.filteredResources), function(item) {\n    return _c('tr', {\n      key: item.id\n    }, [_c('td', {\n      staticClass: \"col-md-1\"\n    }, [_vm._v(_vm._s(item.id))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"col-md-1 item-code\"\n    }, [_vm._v(_vm._s(item.code))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"col-md-3 item-code\"\n    }, [_vm._v(_vm._s(item.name))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"col-md-1\"\n    }, [_vm._v(_vm._s(item.dauky_sl || 0))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"col-md-1\"\n    }, [_vm._v(_vm._s(item.receive_trongky_sl))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"col-md-1\"\n    }, [_vm._v(_vm._s(_vm._f(\"toVnd\")(item.receive_trongky_thanhtien)))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"col-md-1\"\n    }, [_vm._v(_vm._s(item.issue_trongky_sl))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"col-md-1\"\n    }, [_vm._v(_vm._s(_vm._f(\"toVnd\")(item.issue_trongky_thanhtien)))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"col-md-1\"\n    }, [_vm._v(_vm._s(item.sl_tinhtoan))])])\n  }))])])])])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"table-title\"\n  }, [_c('div', {\n    staticClass: \"row\"\n  }, [_c('div', {\n    staticClass: \"col-sm-6\"\n  }, [_c('h2', [_vm._v(\"Báo cáo nhập xuất tồn kho\")])])])])\n},function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('thead', {\n    staticClass: \"z-header\"\n  }, [_c('tr', {\n    staticStyle: {\n      \"border\": \"1px solid #f39c12\"\n    }\n  }, [_c('th', {\n    attrs: {\n      \"rowspan\": \"2\"\n    }\n  }, [_vm._v(\"STT\")]), _vm._v(\" \"), _c('th', {\n    attrs: {\n      \"rowspan\": \"2\"\n    }\n  }, [_vm._v(\"Mã\")]), _vm._v(\" \"), _c('th', {\n    attrs: {\n      \"rowspan\": \"2\"\n    }\n  }, [_vm._v(\"Tên hàng\")]), _vm._v(\" \"), _c('th', [_vm._v(\"Tồn kho đầu kỳ\")]), _vm._v(\" \"), _c('th', {\n    attrs: {\n      \"colspan\": \"2\"\n    }\n  }, [_vm._v(\"Nhập trong kỳ\")]), _vm._v(\" \"), _c('th', {\n    attrs: {\n      \"colspan\": \"2\"\n    }\n  }, [_vm._v(\"Xuất trong kỳ\")]), _vm._v(\" \"), _c('th', [_vm._v(\"Tồn kho cuối kỳ\")])]), _vm._v(\" \"), _c('tr', [_c('th', [_vm._v(\"Số lượng\")]), _vm._v(\" \"), _c('th', [_vm._v(\"Số lượng\")]), _vm._v(\" \"), _c('th', [_vm._v(\"Thành tiền\")]), _vm._v(\" \"), _c('th', [_vm._v(\"Số lượng\")]), _vm._v(\" \"), _c('th', [_vm._v(\"Thành tiền\")]), _vm._v(\" \"), _c('th', [_vm._v(\"Số lượng\")])])])\n}]}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/7.2b3ebe07fc139856029d.js","\n/* styles */\nrequire(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-5bc6c2c2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ReportNXT.vue\")\n\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ReportNXT.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5bc6c2c2\\\"}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ReportNXT.vue\"),\n  /* scopeId */\n  \"data-v-5bc6c2c2\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/views/ReportNXT.vue\n// module id = 1422\n// module chunks = 7","<template>\r\n  <section class=\"content\">\r\n    <div class=\"row\">\r\n      <div class=\"col-xs-12\">\r\n        <div class=\"table-wrapper\">\r\n          <div class=\"table-title\">\r\n              <div class=\"row\">\r\n                  <div class=\"col-sm-6\">\r\n                      <h2>Báo cáo nhập xuất tồn kho</h2>\r\n                  </div>\r\n              </div>\r\n          </div>   \r\n\r\n          <div class=\"filters row\">\r\n              <div class=\"form-group col-sm-6\">\r\n                <date-picker v-model=\"dateFrom\" format=\"YYYY-MM-DD\" lang=\"en\" confirm placeholder=\"Từ ngày\" @change=\"search\"></date-picker>\r\n                <date-picker v-model=\"dateTo\" format=\"YYYY-MM-DD\" lang=\"en\" confirm placeholder=\"Đến ngày\" @change=\"search\"></date-picker>\r\n              </div>\r\n              <div class=\"form-group col-sm-2\">\r\n                <button type=\"button\" class=\"btn btn-primary\" @click=\"updateKiemKe\">Cập nhật Kiểm kê</button>\r\n              </div>\r\n          </div>\r\n          <table class=\"table table-bordered table-condensed\">\r\n            <thead class=\"z-header\">\r\n              <tr style=\"border: 1px solid #f39c12;\">\r\n                <th rowspan=\"2\">STT</th>\r\n                <th rowspan=\"2\">Mã</th>\r\n                <th rowspan=\"2\">Tên hàng</th>\r\n                <th>Tồn kho đầu kỳ</th>\r\n                <th colspan=\"2\">Nhập trong kỳ</th>\r\n                <th colspan=\"2\">Xuất trong kỳ</th>\r\n                <th>Tồn kho cuối kỳ</th>\r\n              </tr>\r\n              <tr>\r\n                <th>Số lượng</th>\r\n                <th>Số lượng</th>\r\n                <th>Thành tiền</th>          \r\n                <th>Số lượng</th>\r\n                <th>Thành tiền</th>\r\n                <th>Số lượng</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              <tr v-for=\"item in filteredResources\" :key=\"item.id\">\r\n                <td class=\"col-md-1\">{{ item.id }}</td>\r\n                <td class=\"col-md-1 item-code\">{{ item.code }}</td>\r\n                <td class=\"col-md-3 item-code\">{{ item.name }}</td>\r\n                <td class=\"col-md-1\">{{ item.dauky_sl || 0 }}</td>\r\n                <td class=\"col-md-1\">{{ item.receive_trongky_sl }}</td>\r\n                <td class=\"col-md-1\">{{ item.receive_trongky_thanhtien | toVnd }}</td>\r\n                <td class=\"col-md-1\">{{ item.issue_trongky_sl }}</td>\r\n                <td class=\"col-md-1\">{{ item.issue_trongky_thanhtien | toVnd }}</td>\r\n                <td class=\"col-md-1\">{{ item.sl_tinhtoan }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>    \r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport DatePicker from 'vue2-datepicker'\r\nimport api from '@/api'\r\nimport { formatDate, getPreviousMonth } from '@/helpers'\r\n\r\nconst curDate = new Date()\r\n\r\nexport default {\r\n  name: 'ReportNXT',\r\n  components: { DatePicker },\r\n  data() {\r\n    return {\r\n      items: [],\r\n      dateFrom: new Date(curDate.getFullYear(), curDate.getMonth(), 1),\r\n      dateTo: new Date().setDate(curDate.getDate() + 1),\r\n      data: [\r\n        {\r\n          code: '',\r\n          name: '',\r\n          dauky_sl: '',\r\n          receive_trongky_sl: '',\r\n          receive_trongky_thanhtien: '',\r\n          issue_trongky_sl: '',\r\n          issue_trongky_thanhtien: '',\r\n          sl_tinhtoan: '' // Ton kho cuoi ky\r\n        }\r\n      ],\r\n      nhap_trong_ky: [],\r\n      xuat_trong_ky: [],\r\n      ton_dau_ky: []\r\n    }\r\n  },\r\n  computed: {\r\n    filteredResources() {\r\n      return this.data // this.items\r\n    }\r\n  },\r\n  async created() {\r\n    await Promise.all([\r\n      this.getItems(),\r\n      this.search()\r\n    ])\r\n  },\r\n  methods: {\r\n    async getItems() {\r\n      try {\r\n        const response = await api.request('get', `/item/cate_active/1,2,4`)\r\n        this.items = response.data\r\n      } catch (err) {\r\n        console.error(err)\r\n      }\r\n    },\r\n    async search() {\r\n      if (!this.dateFrom || !this.dateTo) {\r\n        this.showAlert('Vui lòng chọn ngày tháng!')\r\n        return\r\n      }\r\n      await Promise.all([\r\n        this.getNhapTrongKy(),\r\n        this.getXuatTrongKy(),\r\n        this.getTonkhoDauKy()\r\n      ])\r\n\r\n      this.data = []\r\n      let item = {}\r\n      this.items.forEach((element, idx) => {\r\n        item = {}\r\n        item.id = idx + 1\r\n        item.id_item = element.id\r\n        item.code = element.code\r\n        item.name = element.name\r\n        // Ton dau ky\r\n        let found = this.ton_dau_ky.find((el) => {\r\n          return element.code === el.code && element.id === el.id_item\r\n        })\r\n        if (found) {\r\n          item.dauky_sl = found.sl_thucte\r\n        }\r\n\r\n        // Nhap trong ky\r\n        found = this.nhap_trong_ky.find((el) => {\r\n          return element.code === el.code\r\n        })\r\n        if (found) {\r\n          item.receive_trongky_sl = found.quantity\r\n          item.receive_trongky_thanhtien = found.total_money\r\n        }\r\n\r\n        // Xuat trong ky\r\n        found = this.xuat_trong_ky.find((el) => {\r\n          return element.code === el.code\r\n        })\r\n        if (found) {\r\n          item.issue_trongky_sl = found.quantity\r\n          item.issue_trongky_thanhtien = found.total_money\r\n        }\r\n\r\n        // Ton kho cuoi ky\r\n        item.sl_tinhtoan = this.getTonkhoCuoiKy(item)\r\n\r\n        this.data.push(item)\r\n      })\r\n    },\r\n    async getNhapTrongKy() {\r\n      this.nhap_trong_ky = []\r\n      let query = this.build_query()\r\n      try {\r\n        const response = await api.request('get', `/inventory/p/1?limit=1993&status=1` + query)\r\n        let temp = response.data.data\r\n        let groups = Object.values(temp.reduce((r, o) => {\r\n          let date = o.code\r\n          r[date] = r[date] || {code: o.code, total_money: 0, quantity: 0}\r\n          r[date].total_money += o.gia_nhap\r\n          r[date].quantity += o.quantity\r\n          return r\r\n        }, {}))\r\n        this.nhap_trong_ky = groups\r\n      } catch (err) {\r\n        console.error(err)\r\n      }\r\n    },\r\n    async getXuatTrongKy() {\r\n      this.xuat_trong_ky = []\r\n      let query = this.build_query()\r\n      try {\r\n        const response = await api.request('get', `/trans/trans_detail/p/1?limit=21993` + query)\r\n        let temp = response.data.data\r\n        let groups = Object.values(temp.reduce((r, o) => {\r\n          let date = o.code_item\r\n          r[date] = r[date] || {code: o.code_item, total_money: 0, quantity: 0}\r\n          r[date].total_money += (parseInt(o.quantity) || 0) * (parseInt(o.price) || 0)\r\n          r[date].quantity += parseInt(o.quantity) || 0\r\n          return r\r\n        }, {}))\r\n        this.xuat_trong_ky = groups\r\n      } catch (err) {\r\n        console.error(err)\r\n      }\r\n    },\r\n    async getTonkhoDauKy() {\r\n      this.ton_dau_ky = []\r\n      // Ton dau ky thang nay = ton cuoi ky da kiem ke cua thang truoc\r\n      let fromPeriod = formatDate({date: this.dateFrom, format: 'MM/YYYY'})\r\n      let toPeriod = formatDate({date: this.dateTo, format: 'MM/YYYY'})\r\n      // Chi thuc hien cho cùng kỳ\r\n      if (fromPeriod === toPeriod) {\r\n        try {\r\n          // get ky truoc\r\n          let lastPeriod = getPreviousMonth({date: this.dateFrom, format: 'MM/YYYY'})\r\n          const response = await api.request('get', `/kiemke/p/1?limit=1993&period=${lastPeriod}`)\r\n          this.ton_dau_ky = response.data.data\r\n        } catch (err) {\r\n          console.error(err)\r\n        }\r\n      }\r\n    },\r\n    getTonkhoCuoiKy(item) {\r\n      return (parseInt(item.dauky_sl) || 0) + (parseInt(item.receive_trongky_sl) || 0) - (parseInt(item.issue_trongky_sl) || 0)\r\n    },\r\n    build_query() {\r\n      let query = ''\r\n      if (this.dateFrom) {\r\n        query = query.concat(`&from=${formatDate({date: this.dateFrom})}`)\r\n      }\r\n      if (this.dateTo) {\r\n        query = query.concat(`&to=${formatDate({date: this.dateTo})}`)\r\n      }\r\n\r\n      return query\r\n    },\r\n    async updateKiemKe() {\r\n      // Ton dau ky thang nay = ton cuoi ky da kiem ke cua thang truoc\r\n      let fromPeriod = formatDate({date: this.dateFrom, format: 'MM/YYYY'})\r\n      let toPeriod = formatDate({date: this.dateTo, format: 'MM/YYYY'})\r\n      // Chi thuc hien cho cùng kỳ\r\n      if (fromPeriod === toPeriod) {\r\n        try {\r\n          const data = {\r\n            items: this.data,\r\n            period: fromPeriod\r\n          }\r\n          const response = await api.request('post', `/kiemke/post/mass_save`, data)\r\n          if (response.data.success) {\r\n            this.showToast()\r\n          } else {\r\n            this.showToast('error', response.data.data.code)\r\n          }\r\n        } catch (err) {\r\n          console.error(err)\r\n        }\r\n      }\r\n    },\r\n    showAlert(msg = null) {\r\n      this.$swal(msg || 'Cảnh báo!')\r\n    },\r\n    showToast(type = 'success', message = '') {\r\n      this.$swal({\r\n        type: type,\r\n        title: message || `Cập nhật thành công`,\r\n        toast: true,\r\n        position: 'top-end',\r\n        showConfirmButton: false,\r\n        timer: 5000\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\nthead th,td {\r\n   text-align: center;\r\n   vertical-align: middle!important;\r\n}\r\n.z-label {\r\n  margin-top: 5px;\r\n}\r\n.item-code {\r\n  text-align: left;\r\n}\r\n.table-bordered>thead>tr>th {\r\n  border: 1px solid #f39c12;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// ReportNXT.vue?11757ef4","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"td[data-v-5bc6c2c2],thead th[data-v-5bc6c2c2]{text-align:center;vertical-align:middle!important}.z-label[data-v-5bc6c2c2]{margin-top:5px}.item-code[data-v-5bc6c2c2]{text-align:left}.table-bordered>thead>tr>th[data-v-5bc6c2c2]{border:1px solid #f39c12}\", \"\", {\"version\":3,\"sources\":[\"D:/Source/cms_ps/src/components/views/ReportNXT.vue\"],\"names\":[],\"mappings\":\"AACA,8CACG,kBAAmB,AACnB,+BAAiC,CACnC,AACD,0BACE,cAAgB,CACjB,AACD,4BACE,eAAiB,CAClB,AACD,6CACE,wBAA0B,CAC3B\",\"file\":\"ReportNXT.vue\",\"sourcesContent\":[\"\\nthead th[data-v-5bc6c2c2],td[data-v-5bc6c2c2] {\\r\\n   text-align: center;\\r\\n   vertical-align: middle!important;\\n}\\n.z-label[data-v-5bc6c2c2] {\\r\\n  margin-top: 5px;\\n}\\n.item-code[data-v-5bc6c2c2] {\\r\\n  text-align: left;\\n}\\n.table-bordered>thead>tr>th[data-v-5bc6c2c2] {\\r\\n  border: 1px solid #f39c12;\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-5bc6c2c2\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/views/ReportNXT.vue\n// module id = 1462\n// module chunks = 7","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-5bc6c2c2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./ReportNXT.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"273c93b1\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-5bc6c2c2\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/views/ReportNXT.vue\n// module id = 1475\n// module chunks = 7","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('section', {\n    staticClass: \"content\"\n  }, [_c('div', {\n    staticClass: \"row\"\n  }, [_c('div', {\n    staticClass: \"col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"table-wrapper\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"filters row\"\n  }, [_c('div', {\n    staticClass: \"form-group col-sm-6\"\n  }, [_c('date-picker', {\n    attrs: {\n      \"format\": \"YYYY-MM-DD\",\n      \"lang\": \"en\",\n      \"confirm\": \"\",\n      \"placeholder\": \"Từ ngày\"\n    },\n    on: {\n      \"change\": _vm.search\n    },\n    model: {\n      value: (_vm.dateFrom),\n      callback: function($$v) {\n        _vm.dateFrom = $$v\n      },\n      expression: \"dateFrom\"\n    }\n  }), _vm._v(\" \"), _c('date-picker', {\n    attrs: {\n      \"format\": \"YYYY-MM-DD\",\n      \"lang\": \"en\",\n      \"confirm\": \"\",\n      \"placeholder\": \"Đến ngày\"\n    },\n    on: {\n      \"change\": _vm.search\n    },\n    model: {\n      value: (_vm.dateTo),\n      callback: function($$v) {\n        _vm.dateTo = $$v\n      },\n      expression: \"dateTo\"\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"form-group col-sm-2\"\n  }, [_c('button', {\n    staticClass: \"btn btn-primary\",\n    attrs: {\n      \"type\": \"button\"\n    },\n    on: {\n      \"click\": _vm.updateKiemKe\n    }\n  }, [_vm._v(\"Cập nhật Kiểm kê\")])])]), _vm._v(\" \"), _c('table', {\n    staticClass: \"table table-bordered table-condensed\"\n  }, [_vm._m(1), _vm._v(\" \"), _c('tbody', _vm._l((_vm.filteredResources), function(item) {\n    return _c('tr', {\n      key: item.id\n    }, [_c('td', {\n      staticClass: \"col-md-1\"\n    }, [_vm._v(_vm._s(item.id))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"col-md-1 item-code\"\n    }, [_vm._v(_vm._s(item.code))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"col-md-3 item-code\"\n    }, [_vm._v(_vm._s(item.name))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"col-md-1\"\n    }, [_vm._v(_vm._s(item.dauky_sl || 0))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"col-md-1\"\n    }, [_vm._v(_vm._s(item.receive_trongky_sl))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"col-md-1\"\n    }, [_vm._v(_vm._s(_vm._f(\"toVnd\")(item.receive_trongky_thanhtien)))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"col-md-1\"\n    }, [_vm._v(_vm._s(item.issue_trongky_sl))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"col-md-1\"\n    }, [_vm._v(_vm._s(_vm._f(\"toVnd\")(item.issue_trongky_thanhtien)))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"col-md-1\"\n    }, [_vm._v(_vm._s(item.sl_tinhtoan))])])\n  }))])])])])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"table-title\"\n  }, [_c('div', {\n    staticClass: \"row\"\n  }, [_c('div', {\n    staticClass: \"col-sm-6\"\n  }, [_c('h2', [_vm._v(\"Báo cáo nhập xuất tồn kho\")])])])])\n},function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('thead', {\n    staticClass: \"z-header\"\n  }, [_c('tr', {\n    staticStyle: {\n      \"border\": \"1px solid #f39c12\"\n    }\n  }, [_c('th', {\n    attrs: {\n      \"rowspan\": \"2\"\n    }\n  }, [_vm._v(\"STT\")]), _vm._v(\" \"), _c('th', {\n    attrs: {\n      \"rowspan\": \"2\"\n    }\n  }, [_vm._v(\"Mã\")]), _vm._v(\" \"), _c('th', {\n    attrs: {\n      \"rowspan\": \"2\"\n    }\n  }, [_vm._v(\"Tên hàng\")]), _vm._v(\" \"), _c('th', [_vm._v(\"Tồn kho đầu kỳ\")]), _vm._v(\" \"), _c('th', {\n    attrs: {\n      \"colspan\": \"2\"\n    }\n  }, [_vm._v(\"Nhập trong kỳ\")]), _vm._v(\" \"), _c('th', {\n    attrs: {\n      \"colspan\": \"2\"\n    }\n  }, [_vm._v(\"Xuất trong kỳ\")]), _vm._v(\" \"), _c('th', [_vm._v(\"Tồn kho cuối kỳ\")])]), _vm._v(\" \"), _c('tr', [_c('th', [_vm._v(\"Số lượng\")]), _vm._v(\" \"), _c('th', [_vm._v(\"Số lượng\")]), _vm._v(\" \"), _c('th', [_vm._v(\"Thành tiền\")]), _vm._v(\" \"), _c('th', [_vm._v(\"Số lượng\")]), _vm._v(\" \"), _c('th', [_vm._v(\"Thành tiền\")]), _vm._v(\" \"), _c('th', [_vm._v(\"Số lượng\")])])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-5bc6c2c2\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/views/ReportNXT.vue\n// module id = 1493\n// module chunks = 7"],"sourceRoot":""}